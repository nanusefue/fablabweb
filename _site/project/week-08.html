<!DOCTYPE html>
<html>

    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/archives/2017/fablabbcn/students/271/assets/ico/favicon.ico">

    <title>FAB ACADEMY 2017 - Embedded programming [8]</title>

    <!-- Bootstrap core CSS -->
    <link href="/archives/2017/fablabbcn/students/271/assets/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/archives/2017/fablabbcn/students/271/assets/css/style.css" rel="stylesheet">
    <link href="/archives/2017/fablabbcn/students/271/assets/css/font-awesome.min.css" rel="stylesheet">
        <link href="/archives/2017/fablabbcn/students/271/assets/css/syntax.css" rel="stylesheet">

    <!-- Custom CSS -->
    <!--<link rel="stylesheet" href="/archives/2017/fablabbcn/students/271/css/main.css">-->


    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

    <body>
        <!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/archives/2017/fablabbcn/students/271/">FAB ACADEMY 2017</a>
    </div>
    <div class="navbar-collapse collapse navbar-right">
      <ul class="nav navbar-nav">
        <li ><a href="/archives/2017/fablabbcn/students/271/">HOME</a></li>
      <!--  <li ><a href="/archives/2017/fablabbcn/students/271/blog/">BLOG</a></li> -->
     <!--   <li ><a href="/archives/2017/fablabbcn/students/271/portfolio/">PORTFOLIO</a></li> -->
        <li ><a href="/archives/2017/fablabbcn/students/271/about/">ABOUT</a></li>
     <!--   <li ><a href="/archives/2017/fablabbcn/students/271/contact/">CONTACT</a></li>-->
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>

            <div id="blue">
    <div class="container">
        <div class="row">
            <h3>Embedded programming [8]</h3>
        </div><!-- /row -->
    </div> <!-- /container -->
</div><!-- /blue -->

<div class="container mt">
    <div class="row">

        <div class="col-lg-10 col-lg-offset-1 centered">
    <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
        <!-- Indicators -->
        <ol class="carousel-indicators">
            
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner">
            
            
        </div>
    </div> <!--/Carousel -->
</div>


        <div class="col-lg-10 col-lg-offset-1">
            <div class="spacing"></div>

            <h2>Assignment</h2>

<ul>
<li>
  <h3>Read a microcontroller data sheet.
</h3>
</li>
<li>
  <h3>Program your board to do something, with as many different programming languages and programming environments as possible.
</h3>
</li>
<li>
  <h3>Optionally, experiment with other architectures.</h3>
</li> 
</ul>

<p>
For this assignment began studying the Attiny family of Atmel processors. <a href="http://www.atmel.com/products/microcontrollers/avr/tinyavr.aspx" target="_blank">Attiny
</a></p>
<p>When we work with any electronic component, and more when it is a chip, all of them have their datasheet, these sheets give us the necessary information to be able to use them in any design we make, such as work voltages, currents, programming, arrangement of pins, size, etc.</p>

<div class="col-xs-12 ">
<img width="450px" src="/archives/2017/fablabbcn/students/271/assets/img/project/week8/atmel.png" alt="webpage jekyll" />
<img width="450px" src="/archives/2017/fablabbcn/students/271/assets/img/project/week8/atmel1.png" alt="webpage jekyll" />
</div>

<div class="col-xs-12 ">
<img width="450px" src="/archives/2017/fablabbcn/students/271/assets/img/project/week8/atmel2.png" alt="webpage jekyll" />
<img width="450px" src="/archives/2017/fablabbcn/students/271/assets/img/project/week8/atmel3.png" alt="webpage jekyll" />
</div>

<div class="col-xs-12 col-xs-offset-2 col-lg-10 col-lg-offset-2 ">
  <img width="650px" src="/archives/2017/fablabbcn/students/271/assets/img/project/week8/atmel6.png" alt="webpage jekyll" />
</div>

<p>For this week I decided to investigate to be able to make my board have a bootloader as an arduino and be able to use the Arduino IDE.</p>
<p>For this I will use a bootloader that I have modified and can be used with the attiny44, also it is necessary to know how the pins of the atiny are mapped with the pins of Arduino, here we see a picture of how this would be.</p>

<p>This allows me to upload all the code through the USB port without having to have 6 extra pins and the FABISP.</p>

<div class="col-xs-12 col-xs-offset-2 col-lg-10 col-lg-offset-2 ">
<img width="650px" src="/archives/2017/fablabbcn/students/271/assets/img/project/week8/atmel5.png" alt="webpage jekyll" />
</div>

<p>The first program is a blink, to prove that everything works correctly.</p>

<div class="col-xs-12 ">



<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre>	<span class="cm">/*   Blink */</span>
	<span class="c1">// the setup function runs once when you press reset or power the board
</span>	<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
	  <span class="c1">// initialize digital pin LED_BUILTIN as an output.
</span>	  <span class="n">pinMode</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="c1">// the loop function runs over and over again forever
</span>	<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
	  <span class="n">digitalWrite</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>   <span class="c1">// turn the LED on (HIGH is the voltage level)
</span>	  <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>                       <span class="c1">// wait for a second
</span>	  <span class="n">digitalWrite</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>    <span class="c1">// turn the LED off by making the voltage LOW
</span>	  <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>                       <span class="c1">// wait for a second
</span>	<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>
<p><br /></p>

<div class="col-xs-12 ">

<video width="800" controls="" loop="">
  <source src="/archives/2017/fablabbcn/students/271/assets/img/project/week8/video.mp4" type="video/mp4" />
  Your browser does not support HTML5 video.
</video>
</div>
<p><br /></p>
<p>The second program used the library to control servo motor, basically with this board we can use almost all libraries of arduino, the only problem is the space that is available to our programs, as the 44 attiny is only 4k.</p>
<div class="col-xs-12 ">


<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></td><td class="code"><pre><span class="cp">#include &lt;SoftRcPulseOut.h&gt; 
</span> 
<span class="n">SoftRcPulseOut</span> <span class="n">myservo</span><span class="p">;</span>  <span class="c1">// create servo object to control a servo 
</span>                        <span class="c1">// a maximum of eight servo objects can be created 
</span><span class="cp">#define SERVO_PIN         9
</span>
<span class="cp">#define REFRESH_PERIOD_MS 1
</span>
<span class="cp">#define NOW               1
</span>
<span class="kt">int</span> <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>    <span class="c1">// variable to store the servo position 
</span> 
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> 
<span class="p">{</span> 
  <span class="n">myservo</span><span class="p">.</span><span class="n">attach</span><span class="p">(</span><span class="n">SERVO_PIN</span><span class="p">);</span>  <span class="c1">// attaches the servo on pin defined by SERVO_PIN to the servo object 
</span><span class="p">}</span> 
 
 
<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> 
<span class="p">{</span> 
  <span class="k">for</span><span class="p">(</span><span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="mi">180</span><span class="p">;</span> <span class="n">pos</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1">// goes from 0 degrees to 180 degrees 
</span>  <span class="p">{</span>                                  <span class="c1">// in steps of 1 degree 
</span>    <span class="n">myservo</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">pos</span><span class="p">);</span>              <span class="c1">// tell servo to go to position in variable 'pos' 
</span>    <span class="n">delay</span><span class="p">(</span><span class="n">REFRESH_PERIOD_MS</span><span class="p">);</span>        <span class="c1">// waits 20ms for refresh period 
</span>    <span class="n">SoftRcPulseOut</span><span class="o">::</span><span class="n">refresh</span><span class="p">(</span><span class="n">NOW</span><span class="p">);</span>    <span class="c1">// generates the servo pulse Now
</span>  <span class="p">}</span> 
  <span class="k">for</span><span class="p">(</span><span class="n">pos</span> <span class="o">=</span> <span class="mi">180</span><span class="p">;</span> <span class="n">pos</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">;</span> <span class="n">pos</span><span class="o">-=</span><span class="mi">1</span><span class="p">)</span>     <span class="c1">// goes from 180 degrees to 0 degrees 
</span>  <span class="p">{</span>                                
    <span class="n">myservo</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">pos</span><span class="p">);</span>              <span class="c1">// tell servo to go to position in variable 'pos' 
</span>    <span class="n">delay</span><span class="p">(</span><span class="n">REFRESH_PERIOD_MS</span><span class="p">);</span>        <span class="c1">// waits 20ms for for refresh period 
</span>    <span class="n">SoftRcPulseOut</span><span class="o">::</span><span class="n">refresh</span><span class="p">(</span><span class="n">NOW</span><span class="p">);</span>    <span class="c1">// generates the servo pulse Now
</span>  <span class="p">}</span> 
<span class="p">}</span> <span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<div class="col-xs-12 ">

<video width="800" controls="" loop="">
  <source src="/archives/2017/fablabbcn/students/271/assets/img/project/week8/servo.mp4" type="video/mp4" />
  Your browser does not support HTML5 video.
</video>
</div>

<h3>Referens</h3>

<p><a href="http://academy.cba.mit.edu/classes/embedded_programming/doc8183.pdf">Attiny 44/84</a></p>
<p><a href="https://github.com/nanusefue/micronucleus">Micronucleus</a></p>
<p><a href="https://learn.adafruit.com/add-boards-arduino-v164/overview">Adding third party boards Arduino IDE</a></p>

<!--<h3>Download</h3>-->



        </div>
      <!--  <div class="col-lg-4 col-lg-offset-1">
            <div class="spacing"></div>
            <h4>Project Details</h4>
            <div class="hline"></div>
            <p><b>Date:</b> Jan 30, 2017</p>
            <p><b>Author:</b> Marcel Newman</p>
            <p><b>Categories:</b> project</p>
            <p><b>Tagged:</b> Flat, UI, Development</p>
            <p><b>Client:</b> Wonder Corp.</p>
            <p><b>Website:</b> <a href="http://blacktie.co">http://blacktie.co</a></p> 
        </div>-->
    </div><! --/row -->
</div><! --/container -->
	 
<div id="portfoliowrap">
    <div class="portfolio-centered">
        <h3></h3>
        <div class="recentitems portfolio">
            
        </div><!-- portfolio -->
    </div><!-- portfolio container -->
</div><!--/Portfoliowrap -->


        <div id="footerwrap">
    <div class="container">
        <div class="row">
           <!-- <div class="col-lg-4">
                <h4>About</h4>
                <div class="hline-w"></div>
                <p></p>
            </div> -->
            <div class="col-lg-4">
                <p>
                    
                        <a target="_blank" href="https://github.com/nanusefue" class="btn-social btn-outline"><i class="fa fa-github"></i></a>
                    
                        <a target="_blank" href="https://www.instagram.com/nanusefue/" class="btn-social btn-outline"><i class="fa fa-instagram"></i></a>
                    
                </p>
            </div>
            <div class="col-lg-8" style="color:white">
                <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
                    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>
                    <br />This work is licensed under a 
                    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>
     
            </div> 
        </div><! --/row -->
    </div><! --/container -->
</div><! --/footerwrap -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="/archives/2017/fablabbcn/students/271/assets/js/bootstrap.min.js"></script>
<script src="/archives/2017/fablabbcn/students/271/assets/js/retina-1.1.0.js"></script>
<script src="/archives/2017/fablabbcn/students/271/assets/js/jquery.hoverdir.js"></script>
<script src="/archives/2017/fablabbcn/students/271/assets/js/jquery.hoverex.min.js"></script>
<script src="/archives/2017/fablabbcn/students/271/assets/js/jquery.prettyPhoto.js"></script>
<script src="/archives/2017/fablabbcn/students/271/assets/js/jquery.isotope.min.js"></script>
<script src="/archives/2017/fablabbcn/students/271/assets/js/custom.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90860442-1', 'auto');
  ga('send', 'pageview');

</script>

<script>
// Portfolio
(function($) {
	"use strict";
	var $container = $('.portfolio'),
		$items = $container.find('.portfolio-item'),
		portfolioLayout = 'fitRows';
		
		if( $container.hasClass('portfolio-centered') ) {
			portfolioLayout = 'masonry';
		}
				
		$container.isotope({
			filter: '*',
			animationEngine: 'best-available',
			layoutMode: portfolioLayout,
			animationOptions: {
			duration: 750,
			easing: 'linear',
			queue: false
		},
		masonry: {
		}
		}, refreshWaypoints());
		
		function refreshWaypoints() {
			setTimeout(function() {
			}, 1000);   
		}
				
		$('nav.portfolio-filter ul a').on('click', function() {
				var selector = $(this).attr('data-filter');
				$container.isotope({ filter: selector }, refreshWaypoints());
				$('nav.portfolio-filter ul a').removeClass('active');
				$(this).addClass('active');
				return false;
		});
		
		function getColumnNumber() { 
			var winWidth = $(window).width(), 
			columnNumber = 1;
		
			if (winWidth > 1200) {
				columnNumber = 5;
			} else if (winWidth > 950) {
				columnNumber = 4;
			} else if (winWidth > 600) {
				columnNumber = 3;
			} else if (winWidth > 400) {
				columnNumber = 2;
			} else if (winWidth > 250) {
				columnNumber = 1;
			}
				return columnNumber;
			}       
			
			function setColumns() {
				var winWidth = $(window).width(), 
				columnNumber = getColumnNumber(), 
				itemWidth = Math.floor(winWidth / columnNumber);
				
				$container.find('.portfolio-item').each(function() { 
					$(this).css( { 
					width : itemWidth + 'px' 
				});
			});
		}
		
		function setPortfolio() { 
			setColumns();
			$container.isotope('reLayout');
		}
			
		$container.imagesLoaded(function () { 
			setPortfolio();
		});
		
		$(window).on('resize', function () { 
		setPortfolio();          
	});
})(jQuery);
</script>
    </body>
</html>