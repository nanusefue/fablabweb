<!DOCTYPE html>
<html>

    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/fablabweb/assets/ico/favicon.ico">

    <title>FAB ACADEMY 2017 - Interface and Application Programming [16]</title>

    <!-- Bootstrap core CSS -->
    <link href="/fablabweb/assets/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/fablabweb/assets/css/style.css" rel="stylesheet">
    <link href="/fablabweb/assets/css/font-awesome.min.css" rel="stylesheet">
        <link href="/fablabweb/assets/css/syntax.css" rel="stylesheet">

    <!-- Custom CSS -->
    <!--<link rel="stylesheet" href="/fablabweb/css/main.css">-->


    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

    <body>
        <!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/fablabweb/">FAB ACADEMY 2017</a>
    </div>
    <div class="navbar-collapse collapse navbar-right">
      <ul class="nav navbar-nav">
        <li ><a href="/fablabweb/">HOME</a></li>
      <!--  <li ><a href="/fablabweb/blog/">BLOG</a></li> -->
     <!--   <li ><a href="/fablabweb/portfolio/">PORTFOLIO</a></li> -->
        <li ><a href="/fablabweb/about/">ABOUT</a></li>
     <!--   <li ><a href="/fablabweb/contact/">CONTACT</a></li>-->
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>

            <div id="blue">
    <div class="container">
        <div class="row">
            <h3>Interface and Application Programming [16]</h3>
        </div><!-- /row -->
    </div> <!-- /container -->
</div><!-- /blue -->

<div class="container mt">
    <div class="row">

        <div class="col-lg-10 col-lg-offset-1 centered">
    <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
        <!-- Indicators -->
        <ol class="carousel-indicators">
            
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner">
            
            
        </div>
    </div> <!--/Carousel -->
</div>


        <div class="col-lg-10 col-lg-offset-1">
            <div class="spacing"></div>

            <h2>Assignment</h2>
<h3>Write an application that interfaces with an input and/or output device that you made, comparing as many tool options as possible.</h3>
<p>for this week I created a board that emulates a keyboard, and also you can use any material that is moderately conductive to activate the keyboard keys, is a simpler version of MakeyMakey, to do this I use an Atinny44 and a library that emulates the usb port v-usb, which I have already used the other assignaments.</p>
<p>This board is done on two sides, to be able to do this in the cnc, it is necessary to have a pair of guides and that the design is completely centered in our image, but the faces do not finish squaring.</p>
<div class="row">
    <div class="col-xs-12 ">
        <img width="300px" src="/fablabweb/assets/img/project/week16/eagle3.png" alt="" />
        <img width="300px" src="/fablabweb/assets/img/project/week16/eagle2.png" alt="" />
        <img width="300px" src="/fablabweb/assets/img/project/week16/eagle.png" alt="" />
    </div>
</div>
<div class="row">
    <div class="col-xs-12 ">
        <img width="950px" src="/fablabweb/assets/img/project/week16/eagle4.png" alt="" />
    </div>
</div>
<p>In these two images we can see how it is mapped the pins of the Attiny and the keys that I have decided to use for each output pin.</p>

<div class="row">
    <div class="col-xs-12 ">
        <img width="450px" src="/fablabweb/assets/img/project/week16/portmapping.jpg" alt="" />
        <img width="450px" src="/fablabweb/assets/img/project/week16/keymapping.jpg" alt="" />
    </div>
</div>

<div class="row">
    <div class="col-xs-12 ">
        <img width="450px" src="/fablabweb/assets/img/project/week16/board.jpg" alt="" />
        <img width="450px" src="/fablabweb/assets/img/project/week16/board1.jpg" alt="" />
    </div>
</div>
<p>As I said before I used the library v-usb that allows to emulate a usb 2.0 connector and this ends emuladon a keyboard, we see in the code that there is a part where we indicate which keys we want to map the keyboard, changing these values we can use other keys.</p>
<div class="row">
    <div class="col-xs-12 ">
    
<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
</pre></td><td class="code"><pre><span class="cp">#include &lt;avr/io.h&gt;
#include &lt;avr/wdt.h&gt;
#include &lt;avr/eeprom.h&gt;
#include &lt;avr/interrupt.h&gt;
#include &lt;avr/pgmspace.h&gt;
#include &lt;util/delay.h&gt;
#include &lt;stdlib.h&gt;
#include "usbdrv.h"
#include "oddebug.h"
</span>
<span class="k">static</span> <span class="n">uchar</span>    <span class="n">reportBuffer</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>    <span class="cm">/* buffer for HID reports */</span>
<span class="k">static</span> <span class="n">uchar</span>    <span class="n">idleRate</span><span class="p">;</span>           <span class="cm">/* in 4 ms units */</span>
<span class="k">static</span> <span class="n">uchar</span>    <span class="n">reportCount</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>		<span class="cm">/* current report */</span>
<span class="k">static</span> <span class="n">uchar</span>    <span class="n">keypad</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="mh">0x00</span><span class="p">,</span><span class="mh">0x4F</span><span class="p">,</span><span class="mh">0x50</span><span class="p">,</span><span class="mh">0x51</span><span class="p">,</span><span class="mh">0x52</span><span class="p">,</span><span class="mh">0x2C</span><span class="p">,</span><span class="mh">0x28</span><span class="p">};</span>

<span class="n">PROGMEM</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">usbHidReportDescriptor</span><span class="p">[</span><span class="n">USB_CFG_HID_REPORT_DESCRIPTOR_LENGTH</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="cm">/* USB report descriptor */</span>
    <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span>                    <span class="c1">// USAGE_PAGE (Generic Desktop)
</span>    <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span>                    <span class="c1">// USAGE (Keyboard)
</span>    <span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span>                    <span class="c1">// COLLECTION (Application)
</span>    <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span>                    <span class="c1">//   USAGE_PAGE (Keyboard)
</span>    <span class="mh">0x19</span><span class="p">,</span> <span class="mh">0xe0</span><span class="p">,</span>                    <span class="c1">//   USAGE_MINIMUM (Keyboard LeftControl)
</span>    <span class="mh">0x29</span><span class="p">,</span> <span class="mh">0xe7</span><span class="p">,</span>                    <span class="c1">//   USAGE_MAXIMUM (Keyboard Right GUI)
</span>    <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>                    <span class="c1">//   LOGICAL_MINIMUM (0)
</span>    <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span>                    <span class="c1">//   LOGICAL_MAXIMUM (1)
</span>    <span class="mh">0x75</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span>                    <span class="c1">//   REPORT_SIZE (1)
</span>    <span class="mh">0x95</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span>                    <span class="c1">//   REPORT_COUNT (8)
</span>    <span class="mh">0x81</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span>                    <span class="c1">//   INPUT (Data,Var,Abs)
</span>    <span class="mh">0x95</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span>                    <span class="c1">//   REPORT_COUNT (1)
</span>    <span class="mh">0x75</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span>                    <span class="c1">//   REPORT_SIZE (8)
</span>    <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span>                    <span class="c1">//   LOGICAL_MAXIMUM (101)
</span>    <span class="mh">0x19</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>                    <span class="c1">//   USAGE_MINIMUM (Reserved (no event indicated))
</span>    <span class="mh">0x29</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span>                    <span class="c1">//   USAGE_MAXIMUM (Keyboard Application)
</span>    <span class="mh">0x81</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>                    <span class="c1">//   INPUT (Data,Ary,Abs)
</span>    <span class="mh">0xc0</span>                           <span class="c1">// END_COLLECTION
</span><span class="p">};</span>
<span class="cm">/*
    0x4F    Keyboard RightArrow
    0x50    Keyboard LeftArrow
    0x51    Keyboard DownArrow
    0x52    Keyboard UpArrow
    0x28    Keypad ENTER
    0x2C    Keyboard Spacebar
*/</span> 
<span class="k">static</span> <span class="kt">void</span> <span class="nf">buildReport</span><span class="p">(</span><span class="n">uchar</span> <span class="n">key</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">key</span><span class="o">!=</span><span class="mi">0</span><span class="p">){</span>
        <span class="n">reportBuffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>    <span class="cm">/* no modifiers */</span>
        <span class="n">reportBuffer</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">keypad</span><span class="p">[</span><span class="n">key</span><span class="p">];</span>
    <span class="p">}</span><span class="k">else</span>
    <span class="p">{</span>
        <span class="n">reportBuffer</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span><span class="mh">0x00</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">uchar</span> <span class="nf">keyPress</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">reportCount</span><span class="o">++</span><span class="p">;</span>
    <span class="n">uchar</span>  <span class="n">i</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">x</span><span class="p">;</span>
    <span class="n">x</span><span class="o">=</span><span class="n">PINA</span><span class="p">;</span>
    
    <span class="n">mask</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
    <span class="p">{</span>  
        <span class="k">if</span><span class="p">((</span><span class="n">x</span> <span class="o">&amp;</span> <span class="n">mask</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>                        
        <span class="n">mask</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span> <span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>   
<span class="p">}</span>

<span class="cm">/* -------------------------------------------------------------------------------- */</span>
<span class="cm">/* ------------------------ interface to USB driver ------------------------ */</span>
<span class="cm">/* -------------------------------------------------------------------------------- */</span>

<span class="n">uchar</span>	<span class="nf">usbFunctionSetup</span><span class="p">(</span><span class="n">uchar</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>
<span class="p">{</span>
<span class="n">usbRequest_t</span>    <span class="o">*</span><span class="n">rq</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="n">data</span><span class="p">;</span>

    <span class="n">usbMsgPtr</span> <span class="o">=</span> <span class="n">reportBuffer</span><span class="p">;</span>
    <span class="k">if</span><span class="p">((</span><span class="n">rq</span><span class="o">-&gt;</span><span class="n">bmRequestType</span> <span class="o">&amp;</span> <span class="n">USBRQ_TYPE_MASK</span><span class="p">)</span> <span class="o">==</span> <span class="n">USBRQ_TYPE_CLASS</span><span class="p">){</span>    <span class="cm">/* class request type */</span>
        <span class="k">if</span><span class="p">(</span><span class="n">rq</span><span class="o">-&gt;</span><span class="n">bRequest</span> <span class="o">==</span> <span class="n">USBRQ_HID_GET_REPORT</span><span class="p">){</span>  <span class="cm">/* wValue: ReportType (highbyte), ReportID (lowbyte) */</span>
            <span class="n">buildReport</span><span class="p">(</span><span class="n">keyPress</span><span class="p">());</span>
            <span class="k">return</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">reportBuffer</span><span class="p">);</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">rq</span><span class="o">-&gt;</span><span class="n">bRequest</span> <span class="o">==</span> <span class="n">USBRQ_HID_GET_IDLE</span><span class="p">){</span>
            <span class="n">usbMsgPtr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">idleRate</span><span class="p">;</span>
            <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">rq</span><span class="o">-&gt;</span><span class="n">bRequest</span> <span class="o">==</span> <span class="n">USBRQ_HID_SET_IDLE</span><span class="p">){</span>
            <span class="n">idleRate</span> <span class="o">=</span> <span class="n">rq</span><span class="o">-&gt;</span><span class="n">wValue</span><span class="p">.</span><span class="n">bytes</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="cm">/* no vendor specific requests implemented */</span>
    <span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="cm">/* ------------------------------------------------------------------------- */</span>
<span class="cm">/* --------------------------------- main ---------------------------------- */</span>
<span class="cm">/* ------------------------------------------------------------------------- */</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">PORTA</span><span class="o">=</span><span class="mh">0x00</span><span class="p">;</span> <span class="c1">//banana
</span> 
    <span class="n">uchar</span>   <span class="n">i</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">lastKey</span><span class="p">,</span><span class="n">keyDidChange</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">newkeyDidChange</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="n">usbInit</span><span class="p">();</span>
    <span class="n">usbDeviceDisconnect</span><span class="p">();</span>  <span class="cm">/* enforce re-enumeration, do this while interrupts are disabled! */</span>
    <span class="k">while</span><span class="p">(</span><span class="o">--</span><span class="n">i</span><span class="p">){</span>             <span class="cm">/* fake USB disconnect for &gt; 250 ms */</span>
        <span class="n">wdt_reset</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">usbDeviceConnect</span><span class="p">();</span>
    <span class="n">wdt_enable</span><span class="p">(</span><span class="n">WDTO_1S</span><span class="p">);</span>
    <span class="n">sei</span><span class="p">();</span>
    <span class="k">for</span><span class="p">(;;){</span>    <span class="cm">/* main event loop */</span>
        <span class="n">wdt_reset</span><span class="p">();</span>
        <span class="n">usbPoll</span><span class="p">();</span>
        <span class="n">key</span><span class="o">=</span> <span class="n">keyPress</span><span class="p">();</span>
         <span class="k">if</span><span class="p">(</span><span class="n">lastKey</span> <span class="o">!=</span> <span class="n">key</span><span class="p">){</span>
            <span class="n">lastKey</span> <span class="o">=</span> <span class="n">key</span><span class="p">;</span>
            <span class="n">keyDidChange</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

    	<span class="k">if</span><span class="p">(</span><span class="n">keyDidChange</span> <span class="o">&amp;&amp;</span> <span class="n">usbInterruptIsReady</span><span class="p">()){</span> <span class="cm">/* we can send another key */</span>
            <span class="n">keyDidChange</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        	<span class="n">buildReport</span><span class="p">(</span><span class="n">lastKey</span><span class="p">);</span>
           	<span class="n">usbSetInterrupt</span><span class="p">(</span><span class="n">reportBuffer</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">reportBuffer</span><span class="p">));</span>
        <span class="p">}</span>
   <span class="p">}</span>
   	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
   </pre></td></tr></tbody></table></code></pre></figure>


</div>
</div>
<!--
<div class="row">
    <div class="col-xs-12 ">
        <img width="450px"  src="/fablabweb/assets/img/project/week16/manzana.jpg" alt="">
        <img width="450px"  src="/fablabweb/assets/img/project/week16/Banana.jpg" alt="">
    </div>
</div>
-->

<p>There are infinities of framewoks to create interfaces and connect them with any type of board, my two favorites are Processing and OpenFrameworks, both with very versatile, but the difference is great, OF is programmed in C ++ so we must compile our code for different architectures that we work, in the case processing is based on java that it is possible to execute it in a virtual machine, which allows us to execute our code in any machine without compiling it.</p>
<p>That's why I decided to work with <strong>Processing.</strong></p>
<div class="row  top-buffer">
    <div class="col-xs-12 ">
        <img width="450px" src="/fablabweb/assets/img/project/week16/of.jpg" alt="" />
        <img width="450px" src="/fablabweb/assets/img/project/week16/processing00.png" alt="" />
    </div>
</div>
<div class="row  top-buffer">
    <div class="col-xs-12 ">
  
<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
</pre></td><td class="code"><pre><span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span> 
<span class="kt">float</span> <span class="n">xpos</span><span class="p">,</span> <span class="n">ypos</span><span class="p">;</span> <span class="c1">// Position  Balls 
</span><span class="kt">float</span> <span class="n">xspeed</span> <span class="o">=</span> <span class="n">random</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span> <span class="c1">//  Balls speed X
</span><span class="kt">float</span> <span class="n">yspeed</span> <span class="o">=</span> <span class="n">random</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span> <span class="c1">// Balls speed Y
</span><span class="kt">int</span> <span class="n">player1</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">player2</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">playerpos1</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">playerpos2</span><span class="p">;</span>
<span class="n">PFont</span> <span class="n">f</span><span class="p">;</span>                           <span class="c1">// STEP 1 Declare PFont variable
</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>
     <span class="n">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">400</span><span class="p">);</span>
     <span class="n">noStroke</span><span class="p">();</span>
     <span class="n">frameRate</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
     <span class="n">smooth</span><span class="p">();</span>
     <span class="n">playerpos1</span> <span class="o">=</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
     <span class="n">playerpos2</span> <span class="o">=</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
     <span class="n">xpos</span> <span class="o">=</span> <span class="mi">45</span><span class="p">;</span>
     <span class="n">ypos</span> <span class="o">=</span> <span class="n">playerpos1</span><span class="p">;</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">createFont</span><span class="p">(</span><span class="s">"Arial"</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="nb">true</span><span class="p">);</span> <span class="c1">// STEP 2 Create Font
</span> <span class="p">}</span>
 
<span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span>
 <span class="p">{</span>
   
      
   
  
 
    <span class="n">background</span><span class="p">(</span><span class="mi">80</span><span class="p">);</span>
      <span class="n">textFont</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="mi">46</span><span class="p">);</span>                  <span class="c1">// STEP 3 Specify font to be used
</span>             <span class="n">text</span><span class="p">(</span><span class="n">player2</span><span class="o">+</span><span class="s">"|"</span><span class="o">+</span><span class="n">player1</span><span class="p">,(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span> 
     <span class="n">xspeed</span> <span class="o">*=</span> <span class="mf">1.001</span><span class="p">;</span>
     <span class="n">xpos</span> <span class="o">+=</span> <span class="n">xspeed</span><span class="p">;</span>
     <span class="n">ypos</span> <span class="o">+=</span> <span class="n">yspeed</span><span class="p">;</span>
    

 <span class="k">if</span> <span class="p">(</span><span class="n">ypos</span> <span class="o">&gt;</span> <span class="n">height</span><span class="o">-</span><span class="n">size</span><span class="o">/</span><span class="mi">2</span> <span class="o">||</span> <span class="n">ypos</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">+</span><span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> 
 <span class="p">{</span>
     <span class="n">yspeed</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
 <span class="p">}</span>
 
 <span class="k">if</span> <span class="p">(</span> <span class="n">xpos</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="o">+</span><span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">if</span> <span class="p">(</span><span class="n">ypos</span> <span class="o">&gt;</span> <span class="n">playerpos1</span><span class="o">-</span><span class="mi">50</span> <span class="o">&amp;&amp;</span> <span class="n">ypos</span> <span class="o">&lt;</span> <span class="n">playerpos1</span><span class="o">+</span><span class="mi">50</span><span class="p">){</span>
         <span class="n">xspeed</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
         <span class="n">yspeed</span> <span class="o">+=</span> <span class="p">(</span><span class="n">ypos</span><span class="o">-</span><span class="n">playerpos1</span><span class="p">)</span><span class="o">/</span><span class="mi">5</span><span class="p">;</span>
     <span class="p">}</span>
 <span class="p">}</span>
 
 <span class="k">if</span> <span class="p">(</span><span class="n">xpos</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">){</span>
       <span class="n">player1</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
       <span class="k">if</span> <span class="p">(</span><span class="n">player1</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">){</span>
             <span class="n">xpos</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
             <span class="n">ypos</span> <span class="o">=</span> <span class="n">playerpos1</span><span class="p">;</span>
             <span class="n">xspeed</span> <span class="o">=</span> <span class="n">random</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>
             <span class="c1">//xspeed *= -1;
</span>             <span class="n">yspeed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
             <span class="n">textFont</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="mi">46</span><span class="p">);</span>                  <span class="c1">// STEP 3 Specify font to be used
</span>             <span class="n">text</span><span class="p">(</span><span class="n">player2</span><span class="o">+</span><span class="s">"|"</span><span class="o">+</span><span class="n">player1</span><span class="p">,(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span> 
       <span class="p">}</span>
      
 <span class="p">}</span>

 <span class="k">if</span> <span class="p">(</span> <span class="n">xpos</span> <span class="o">&gt;=</span> <span class="n">width</span><span class="o">-</span><span class="mi">30</span><span class="o">-</span><span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">if</span> <span class="p">(</span><span class="n">ypos</span> <span class="o">&gt;</span> <span class="n">playerpos2</span><span class="o">-</span><span class="mi">50</span> <span class="o">&amp;&amp;</span> <span class="n">ypos</span> <span class="o">&lt;</span> <span class="n">playerpos2</span><span class="o">+</span><span class="mi">50</span><span class="p">){</span>
         <span class="n">xspeed</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
         <span class="n">yspeed</span> <span class="o">+=</span> <span class="p">(</span><span class="n">ypos</span><span class="o">-</span><span class="n">playerpos2</span><span class="p">)</span><span class="o">/</span><span class="mi">5</span><span class="p">;</span>
     <span class="p">}</span>
 <span class="p">}</span>
 
 <span class="k">if</span> <span class="p">(</span><span class="n">xpos</span> <span class="o">&gt;=</span> <span class="n">width</span><span class="p">){</span>
 <span class="n">player2</span> <span class="o">+=</span><span class="mi">1</span> <span class="p">;</span>
 <span class="k">if</span> <span class="p">(</span><span class="n">player2</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">){</span>
 <span class="n">xpos</span> <span class="o">=</span> <span class="n">width</span><span class="o">-</span><span class="mi">50</span><span class="p">;</span>
 <span class="n">ypos</span> <span class="o">=</span> <span class="n">playerpos2</span><span class="p">;</span>
 <span class="n">xspeed</span> <span class="o">=</span> <span class="o">-</span><span class="n">random</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>
 <span class="n">yspeed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
       <span class="n">textFont</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="mi">46</span><span class="p">);</span>                  <span class="c1">// STEP 3 Specify font to be used
</span>             <span class="n">text</span><span class="p">(</span><span class="n">player2</span><span class="o">+</span><span class="s">"|"</span><span class="o">+</span><span class="n">player1</span><span class="p">,(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span> 
 <span class="p">}</span>
 
 <span class="p">}</span>

 
 <span class="n">ellipse</span><span class="p">(</span><span class="n">xpos</span><span class="p">,</span> <span class="n">ypos</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>
 <span class="n">rect</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">playerpos1</span><span class="o">-</span><span class="mi">50</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span>
 <span class="n">rect</span> <span class="p">(</span><span class="n">width</span><span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="n">playerpos2</span><span class="o">-</span><span class="mi">50</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span>
 
 <span class="k">if</span> <span class="p">(</span><span class="n">keyPressed</span><span class="p">)</span> <span class="p">{</span>
       <span class="k">if</span> <span class="p">(</span><span class="n">keyCode</span> <span class="o">==</span> <span class="n">LEFT</span><span class="p">)</span> <span class="p">{</span>
           <span class="k">if</span> <span class="p">(</span><span class="n">playerpos1</span> <span class="o">&gt;=</span><span class="mi">50</span><span class="p">)</span>
                 <span class="n">playerpos1</span> <span class="o">=</span> <span class="n">playerpos1</span> <span class="o">-</span> <span class="mi">8</span><span class="p">;</span>
       <span class="p">}</span>
       <span class="k">if</span> <span class="p">(</span><span class="n">keyCode</span> <span class="o">==</span> <span class="n">RIGHT</span><span class="p">)</span>
       <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="n">playerpos1</span> <span class="o">&lt;=</span><span class="n">height</span><span class="o">-</span><span class="mi">50</span><span class="p">)</span>
                 <span class="n">playerpos1</span> <span class="o">=</span> <span class="n">playerpos1</span> <span class="o">+</span> <span class="mi">8</span><span class="p">;</span>
       <span class="p">}</span>
 <span class="p">}</span>
 <span class="k">if</span> <span class="p">(</span><span class="n">keyPressed</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">keyCode</span> <span class="o">==</span> <span class="n">UP</span><span class="p">)</span> 
        <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">playerpos2</span> <span class="o">&gt;=</span><span class="mi">50</span><span class="p">)</span>
             <span class="n">playerpos2</span> <span class="o">=</span> <span class="n">playerpos2</span> <span class="o">-</span> <span class="mi">8</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">keyCode</span> <span class="o">==</span> <span class="n">DOWN</span><span class="p">){</span>
             <span class="k">if</span> <span class="p">(</span><span class="n">playerpos2</span> <span class="o">&lt;=</span><span class="n">height</span><span class="o">-</span><span class="mi">50</span><span class="p">)</span>
                   <span class="n">playerpos2</span> <span class="o">=</span> <span class="n">playerpos2</span> <span class="o">+</span> <span class="mi">8</span><span class="p">;</span>
             <span class="p">}</span>
         <span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="n">player1</span> <span class="o">&gt;=</span><span class="mi">6</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">player1</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span>
        <span class="n">background</span><span class="p">(</span><span class="mi">80</span><span class="p">);</span>

    <span class="n">textFont</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="mi">46</span><span class="p">);</span>                  <span class="c1">// STEP 3 Specify font to be used
</span>   <span class="n">text</span><span class="p">(</span><span class="n">player2</span><span class="o">+</span><span class="s">"|"</span><span class="o">+</span><span class="n">str</span><span class="p">(</span><span class="n">player1</span><span class="p">),(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span> 
   <span class="n">delay</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
       <span class="n">player1</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
       <span class="n">player2</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="k">if</span> <span class="p">(</span><span class="n">player2</span> <span class="o">&gt;=</span><span class="mi">6</span><span class="p">)</span> <span class="p">{</span>
 <span class="n">player2</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span>
     <span class="n">background</span><span class="p">(</span><span class="mi">80</span><span class="p">);</span>

        <span class="n">textFont</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="mi">46</span><span class="p">);</span>                  <span class="c1">// STEP 3 Specify font to be used
</span>             <span class="n">text</span><span class="p">(</span><span class="n">str</span><span class="p">(</span><span class="n">player2</span><span class="p">)</span><span class="o">+</span><span class="s">"|"</span><span class="o">+</span><span class="n">player1</span><span class="p">,(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span> 
   <span class="n">delay</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
   <span class="n">player1</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
   <span class="n">player2</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>

 <span class="p">}</span>  
         <span class="p">}</span>
   </pre></td></tr></tbody></table></code></pre></figure>


</div>
<div class="row">
<p>When joining my board with this game, which is the Pong, instead of using the keyboard, I have decided that each competitor should play with a piece of fruit, and I have called it BananaPong.</p>
<p>The game consists of touching the corresponding steal to raise or lower the white line, the dough is to climb and the banana to go down.</p>
<p>Also the code is modified so that it only detects the pressing of one of the keys, being able to interfere in the game of the opponent, but also being able to harm oneself.</p>
<div class="col-xs-12  col-lg-12">
        <img width="450px" src="/fablabweb/assets/img/project/week16/Bananapong.png" alt="" />
                <img width="500px" src="/fablabweb/assets/img/project/week16/fruit.jpg" alt="" />

     </div>
     <div class="col-xs-12 ">

<video width="800" controls="" loop="">
  <source src="/fablabweb/assets/img/project/week16/video.mp4" type="video/mp4" />
  Your browser does not support HTML5 video.
</video>
</div>
</div>

</div>
<h3>Download</h3>
<p><a href="/fablabweb/assets/img/project/week16/download/firmware.zip">Firmware</a></p>
<p><a href="/fablabweb/assets/img/project/week16/download/PoiMak3y.zip">Electronics</a></p>



        </div>
      <!--  <div class="col-lg-4 col-lg-offset-1">
            <div class="spacing"></div>
            <h4>Project Details</h4>
            <div class="hline"></div>
            <p><b>Date:</b> Sep 7, 2017</p>
            <p><b>Author:</b> Marcel Newman</p>
            <p><b>Categories:</b> project</p>
            <p><b>Tagged:</b> </p>
            <p><b>Client:</b> </p>
            <p><b>Website:</b> <a href=""></a></p> 
        </div>-->
    </div><! --/row -->
</div><! --/container -->
	 
<div id="portfoliowrap">
    <div class="portfolio-centered">
        <h3></h3>
        <div class="recentitems portfolio">
            
        </div>
    </div>
</div> 


        <div id="footerwrap">
    <div class="container">
        <div class="row">
           <!-- <div class="col-lg-4">
                <h4>About</h4>
                <div class="hline-w"></div>
                <p></p>
            </div> -->
            <div class="col-lg-4">
                <p>
                    
                        <a target="_blank" href="https://github.com/nanusefue" class="btn-social btn-outline"><i class="fa fa-github"></i></a>
                    
                        <a target="_blank" href="https://www.instagram.com/nanusefue/" class="btn-social btn-outline"><i class="fa fa-instagram"></i></a>
                    
                </p>
            </div>
            <div class="col-lg-8" style="color:white">
                <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
                    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>
                    <br />This work is licensed under a 
                    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>
     
            </div> 
        </div><! --/row -->
    </div><! --/container -->
</div><! --/footerwrap -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="/fablabweb/assets/js/bootstrap.min.js"></script>
<script src="/fablabweb/assets/js/retina-1.1.0.js"></script>
<script src="/fablabweb/assets/js/jquery.hoverdir.js"></script>
<script src="/fablabweb/assets/js/jquery.hoverex.min.js"></script>
<script src="/fablabweb/assets/js/jquery.prettyPhoto.js"></script>
<script src="/fablabweb/assets/js/jquery.isotope.min.js"></script>
<script src="/fablabweb/assets/js/custom.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90860442-1', 'auto');
  ga('send', 'pageview');

</script>

<script>
// Portfolio
(function($) {
	"use strict";
	var $container = $('.portfolio'),
		$items = $container.find('.portfolio-item'),
		portfolioLayout = 'fitRows';
		
		if( $container.hasClass('portfolio-centered') ) {
			portfolioLayout = 'masonry';
		}
				
		$container.isotope({
			filter: '*',
			animationEngine: 'best-available',
			layoutMode: portfolioLayout,
			animationOptions: {
			duration: 750,
			easing: 'linear',
			queue: false
		},
		masonry: {
		}
		}, refreshWaypoints());
		
		function refreshWaypoints() {
			setTimeout(function() {
			}, 1000);   
		}
				
		$('nav.portfolio-filter ul a').on('click', function() {
				var selector = $(this).attr('data-filter');
				$container.isotope({ filter: selector }, refreshWaypoints());
				$('nav.portfolio-filter ul a').removeClass('active');
				$(this).addClass('active');
				return false;
		});
		
		function getColumnNumber() { 
			var winWidth = $(window).width(), 
			columnNumber = 1;
		
			if (winWidth > 1200) {
				columnNumber = 5;
			} else if (winWidth > 950) {
				columnNumber = 4;
			} else if (winWidth > 600) {
				columnNumber = 3;
			} else if (winWidth > 400) {
				columnNumber = 2;
			} else if (winWidth > 250) {
				columnNumber = 1;
			}
				return columnNumber;
			}       
			
			function setColumns() {
				var winWidth = $(window).width(), 
				columnNumber = getColumnNumber(), 
				itemWidth = Math.floor(winWidth / columnNumber);
				
				$container.find('.portfolio-item').each(function() { 
					$(this).css( { 
					width : itemWidth + 'px' 
				});
			});
		}
		
		function setPortfolio() { 
			setColumns();
			$container.isotope('reLayout');
		}
			
		$container.imagesLoaded(function () { 
			setPortfolio();
		});
		
		$(window).on('resize', function () { 
		setPortfolio();          
	});
})(jQuery);
</script>
    </body>
</html>